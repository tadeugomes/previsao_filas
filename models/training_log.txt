======================================================================
TREINO DE MODELOS REAIS COM DADOS AIS
======================================================================

======================================================================
CARREGANDO DADOS AIS
======================================================================

âœ… Dataset carregado: 308 registros
   Colunas: ['imo', 'name', 'type', 'porto', 'berthing_time', 'lat', 'lon', 'waiting_time_hours', 'num_positions']
   PerÃ­odo: 2025-12-29T11:51:00Z a 2026-01-29T06:43:00Z

======================================================================
PREPROCESSAMENTO DE FEATURES
======================================================================

ğŸ“… Adicionando features temporais...
ğŸ“¦ Adicionando features de carga...
ğŸ­ Adicionando features de porto...
ğŸš¢ Adicionando features de navio...
ğŸ“Š Adicionando features de movimentaÃ§Ã£o...
ğŸ“ˆ Calculando features histÃ³ricas...
ğŸš¦ Estimando features de fila...
ğŸŒ¤ï¸  Adicionando features climÃ¡ticas (defaults)...

âœ… Preprocessamento concluÃ­do!
   Total de features: 34
   Registros vÃ¡lidos: 270/308

âœ… Dados vÃ¡lidos para treino: 270

======================================================================
PERFIL: VEGETAL
======================================================================
Amostras: 194
Features usadas (15): ['navios_no_fundeio_na_chegada', 'porto_tempo_medio_historico', 'tempo_espera_ma5', 'navios_na_fila_7d', 'nome_porto_encoded', 'natureza_carga_encoded', 'movimentacao_total_toneladas', 'mes', 'periodo_safra', 'dia_semana', 'flag_soja', 'flag_milho', 'dwt_normalizado', 'calado_normalizado', 'tipo_navio_encoded']

======================================================================
TREINANDO MODELO: VEGETAL
======================================================================

ğŸ“Š Dados de treino:
   Train: 135 amostras
   Val:   29 amostras
   Test:  30 amostras

ğŸ¤– Treinando LightGBM Regressor...

ğŸ“Š MÃ©tricas Regressor:
   Train - MAE: 15.20h | RÂ²: 0.990
   Val   - MAE: 25.61h   | RÂ²: 0.970
   Test  - MAE: 19.00h  | RÂ²: 0.982

ğŸ¤– Treinando LightGBM Classifier...

ğŸ“Š MÃ©tricas Classifier:
   Train - Accuracy: 1.000
   Val   - Accuracy: 0.931
   Test  - Accuracy: 0.933

ğŸ” Top 10 features mais importantes:
   tempo_espera_ma5                   :    216
   porto_tempo_medio_historico        :    169
   dia_semana                         :    115
   navios_no_fundeio_na_chegada       :     55
   mes                                :     16
   navios_na_fila_7d                  :     15
   nome_porto_encoded                 :      6
   movimentacao_total_toneladas       :      0
   natureza_carga_encoded             :      0
   periodo_safra                      :      0

âœ… VALIDAÃ‡ÃƒO DE ACEITAÃ‡ÃƒO:
   âœ… MAE < 30h (test)
   âœ… MAE < 50h (test)
   âœ… RÂ² > 0.20 (test)
   âœ… Accuracy > 0.40 (test)

ğŸ‰ Modelo VEGETAL APROVADO para produÃ§Ã£o!

ğŸ’¾ Modelos salvos em models/:
   - vegetal_light_lgb_reg.pkl
   - vegetal_light_lgb_clf.pkl
   - vegetal_light_metadata.json

======================================================================
PERFIL: MINERAL
======================================================================
Amostras: 15
âš ï¸  AVISO: Poucas amostras para MINERAL. Usando todos os dados.
Features usadas (15): ['navios_no_fundeio_na_chegada', 'porto_tempo_medio_historico', 'tempo_espera_ma5', 'navios_na_fila_7d', 'nome_porto_encoded', 'natureza_carga_encoded', 'movimentacao_total_toneladas', 'mes', 'dia_semana', 'dwt_normalizado', 'calado_normalizado', 'tipo_navio_encoded', 'densidade_carga', 'capacidade_porto', 'num_bercos']

======================================================================
TREINANDO MODELO: MINERAL
======================================================================

ğŸ“Š Dados de treino:
   Train: 188 amostras
   Val:   41 amostras
   Test:  41 amostras

ğŸ¤– Treinando LightGBM Regressor...

ğŸ“Š MÃ©tricas Regressor:
   Train - MAE: 10.61h | RÂ²: 0.994
   Val   - MAE: 16.07h   | RÂ²: 0.980
   Test  - MAE: 16.38h  | RÂ²: 0.985

ğŸ¤– Treinando LightGBM Classifier...

ğŸ“Š MÃ©tricas Classifier:
   Train - Accuracy: 1.000
   Val   - Accuracy: 0.976
   Test  - Accuracy: 0.976

ğŸ” Top 10 features mais importantes:
   porto_tempo_medio_historico        :    311
   tempo_espera_ma5                   :    291
   navios_no_fundeio_na_chegada       :    209
   dia_semana                         :    113
   capacidade_porto                   :    112
   nome_porto_encoded                 :     80
   navios_na_fila_7d                  :     28
   tipo_navio_encoded                 :     24
   num_bercos                         :     22
   movimentacao_total_toneladas       :     13

âœ… VALIDAÃ‡ÃƒO DE ACEITAÃ‡ÃƒO:
   âœ… MAE < 30h (test)
   âœ… MAE < 50h (test)
   âœ… RÂ² > 0.20 (test)
   âœ… Accuracy > 0.40 (test)

ğŸ‰ Modelo MINERAL APROVADO para produÃ§Ã£o!

ğŸ’¾ Modelos salvos em models/:
   - mineral_light_lgb_reg.pkl
   - mineral_light_lgb_clf.pkl
   - mineral_light_metadata.json

======================================================================
PERFIL: FERTILIZANTE
======================================================================
Amostras: 61
Features usadas (15): ['navios_no_fundeio_na_chegada', 'porto_tempo_medio_historico', 'tempo_espera_ma5', 'navios_na_fila_7d', 'nome_porto_encoded', 'natureza_carga_encoded', 'movimentacao_total_toneladas', 'mes', 'periodo_safra', 'dia_semana', 'dwt_normalizado', 'calado_normalizado', 'tipo_navio_encoded', 'flag_quimico', 'temperatura_media']

======================================================================
TREINANDO MODELO: FERTILIZANTE
======================================================================

ğŸ“Š Dados de treino:
   Train: 42 amostras
   Val:   9 amostras
   Test:  10 amostras

ğŸ¤– Treinando LightGBM Regressor...

ğŸ“Š MÃ©tricas Regressor:
   Train - MAE: 34.36h | RÂ²: 0.930
   Val   - MAE: 32.65h   | RÂ²: 0.935
   Test  - MAE: 60.29h  | RÂ²: 0.838

ğŸ¤– Treinando LightGBM Classifier...

ğŸ“Š MÃ©tricas Classifier:
   Train - Accuracy: 0.952
   Val   - Accuracy: 0.889
   Test  - Accuracy: 0.900

ğŸ” Top 10 features mais importantes:
   porto_tempo_medio_historico        :     58
   tempo_espera_ma5                   :     39
   nome_porto_encoded                 :     16
   dia_semana                         :      4
   navios_no_fundeio_na_chegada       :      1
   natureza_carga_encoded             :      0
   navios_na_fila_7d                  :      0
   movimentacao_total_toneladas       :      0
   mes                                :      0
   periodo_safra                      :      0

âœ… VALIDAÃ‡ÃƒO DE ACEITAÃ‡ÃƒO:
   âŒ MAE < 30h (test)
   âŒ MAE < 50h (test)
   âœ… RÂ² > 0.20 (test)
   âœ… Accuracy > 0.40 (test)

âš ï¸  Modelo FERTILIZANTE NÃƒO atende todos os critÃ©rios (mas pode ser Ãºtil)

ğŸ’¾ Modelos salvos em models/:
   - fertilizante_light_lgb_reg.pkl
   - fertilizante_light_lgb_clf.pkl
   - fertilizante_light_metadata.json

======================================================================
RESUMO FINAL
======================================================================

VEGETAL:
   MAE (test):  19.00h
   RÂ² (test):   0.982
   Acc (test):  0.933
   Status:      âœ… APROVADO

MINERAL:
   MAE (test):  16.38h
   RÂ² (test):   0.985
   Acc (test):  0.976
   Status:      âœ… APROVADO

FERTILIZANTE:
   MAE (test):  60.29h
   RÂ² (test):   0.838
   Acc (test):  0.900
   Status:      âš ï¸  Revisar

======================================================================
âœ… TREINO CONCLUÃDO!
======================================================================

Modelos salvos em: models/
PrÃ³ximos passos:
  1. Testar modelos com streamlit_app.py
  2. Validar previsÃµes
  3. Monitorar performance em produÃ§Ã£o
======================================================================
